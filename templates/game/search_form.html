{% extends 'game_base.html' %}

{% block navbar %}
<li><a href="{{url_for('game.help')}}">HELP</a></li>
{% endblock %}

{% block search_form %}
<form action="{{url_for('game.search')}}" method="POST" novalidate>
    {{form.hidden_tag()}}
    <div class="search-form">
        <!-- テキストボックスと検索ボタンは横並び -->
        {{form.title(class="form-control", placeholder="タイトルを入力（例：FINAL FANTASY）")|safe}}
        <!--{{form.submit(class="btn", value="検索")}}-->
        <span>
            <button class="name-search-btn" type="submit" aria-label="Search">
                <i class="fa fa-search" aria-hidden="true"></i>
            </button>
        </span>
    </div>
</form>
{% endblock %}
{% block content %}
<div class="container">
    <h2 class="game-title">ゲーム検索</h2>
    <form class="wrapper" action="{{url_for('game.search')}}" method="POST" novalidate>
        <aside class="aside-form">
            <div class="viewpoint-area">
                <h3>選択した観点</h3>
                <ul class="viewpoint-area-choosed"></ul>
                {{form.submit(class="btn", value="観点で検索")}}
            </div>
            {% if form.title.errors %}
            <ul class="text-danger">
                {% for error in form.title.errors %}
                <li>{{error}}</li>
                {% endfor %}
            </ul>
            {% endif %}
            <div class="vp-desc-area">
                <div class="vp-desc-header">
                    <strong>観点の説明: </strong><span id="vpDescIcon"></span>
                </div>
                <div class="vp-desc-content">
                    <p class="vp-desc-text">観点を選択すると、ここに説明が表示されます。</p>
                </div>
            </div>
        </aside>
        <main class="form-main">
            {{ form.hidden_tag() }}
            {% from 'components/checkbox_form.html' import render_checkbox_form %}
            {% for main_group in viewpoint_choices.keys() %}
            <div class="selection-area">
                {{ render_checkbox_form(form, viewpoint_choices, main_group) }}
            </div>
            {% endfor %}
        </main>
    </form>
</div>
{% endblock %}
{% block script %}
<script src="{{url_for('static', filename='scripts/vp2Desc.js')}}"></script>
<script src="{{url_for('static', filename='scripts/viewpoint-area.js')}}"></script>
<script src="{{url_for('static', filename='scripts/accordion.js')}}"></script>
{% endblock %}